<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ìŠ¤íƒ€ëŠ” í•´ë³¸ì  ì—†ì§€ë§Œ ë§Œë“¤ì–´ë³´ëŠ” ìê¸°ì†Œê°œ í˜ì´ì§€1</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="introduction-basic.css" /> -->
    <link rel="stylesheet" href="../styles/introduction-basic.css" />
    <link rel="stylesheet" href="../styles/memberIntro.css" />
    <link rel="stylesheet" href="../styles/upload.css" />
    <link rel="stylesheet" href="../styles/comments.css" />
</head>
<style>

</style>
<script type="module" src="../js/introduction-basic.js">
</script>
<script type="module" src="../js/posts.js"></script>

<script type="module">
    import { subscribeCount, updateLike } from "../js/likebtn.js";

    const urlParams = new URLSearchParams(window.location.search);
    const keyFromURL = urlParams.get("name");

    const likeContainer = document.querySelector(".LIKE");
    const keyFromDataAttr = likeContainer?.dataset.key;

    const targetKey = keyFromURL || keyFromDataAttr || "LIKECOUNT";

    subscribeCount(targetKey);

    document.getElementById("LIKEBTN").addEventListener("click", () => {
        updateLike(targetKey);
    });

    // === ëŒ“ê¸€ ê´€ë ¨ ===
    import { registerComment } from "../js/comments.js";

    const $commentList = $("#commentList");
    const $commentButton = $("#commentButton");

    // ë“±ë¡ ë²„íŠ¼
    $commentButton.click(async function () {
      const comment = $("#commentInput").val();
      const commentId = $(this).closest("#postModal").data("id");

      await registerComment(commentId, comment);
    });
</script>

<body>
    <header>
        <h1 class="page-logo"><a href="../pages/main-page.html">RETURN DREAM</a></h1>
    </header>
    <div class="profile-header" style="display: flex;">
        <img src="" id="profile-image"
            class="profile-image">
        <div class="profile-info">
            <h1 id="profile-name"></h1>
            <div class="profile-button">
                <button id="following" class="fw-bold btn btn-outline-dark">íŒ”ë¡œì‰</button><button id="LIKEBTN"
                    type="button" class="likebtnS fw-bold rounded-pill btn btn-outline-dark">
                    <span class="heartS" id="heart">â™¡</span>
                    <span>ì¢‹ì•„ìš”</span>
                    <span id="count">0</span>
                </button>

            </div>
            <div class="profile-stats">
                <span>ê²Œì‹œë¬¼ <span id="posting_val"></span></span>
                <span>íŒ”ë¡œì›Œ <span id="followers"></span></span>
                <span>íŒ”ë¡œìš° 30</span>
            </div>
        </div>
        <div class="post">
            <div class="tags">
                <a href="https://github.com/hanjsnote" class="gitbtn btn btn-outline-dark git-button" id="github-link"
                    onmouseover="document.getElementById('git-img').src='https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2F677nA%2FbtsOY8h4sVK%2FAAAAAAAAAAAAAAAAAAAAAJ8Y8ovhJGHzv_w-ws5rQ5vjvbnAUa-NRNszg6kfdEvY%2Fimg.jpg%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1753973999%26allow_ip%3D%26allow_referer%3D%26signature%3Dg6LmbibdRQGR3%252F8caVvw7DHAXRE%253D'"
                    onmouseout="document.getElementById('git-img').src='https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdyHKrW%2FbtsOY3gRu1N%2FAAAAAAAAAAAAAAAAAAAAANfdlgUYRRM5qNO4ChXq6PlL19mSTikOpFmjA_RfmOLS%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1753973999%26allow_ip%3D%26allow_referer%3D%26signature%3Dn8eFE8Wc2wnHJmCYfBb6aGDUlmA%253D'">
                    <img id="git-img"
                        src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FdyHKrW%2FbtsOY3gRu1N%2FAAAAAAAAAAAAAAAAAAAAANfdlgUYRRM5qNO4ChXq6PlL19mSTikOpFmjA_RfmOLS%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1753973999%26allow_ip%3D%26allow_referer%3D%26signature%3Dn8eFE8Wc2wnHJmCYfBb6aGDUlmA%253D"
                        alt="GitHub" style="height: 20px;">
                    <span class="fw-bold">GIT</span>
                </a>
                <button id="openUploadModal" class="fw-bold btn btn-outline-dark">ì—…ë¡œë“œ</button>
            </div>
        </div>
    </div>
    <div class="self_introduction" id="profile-content">
        <!-- ì•ˆë…•í•˜ì„¸ìš” ê°œë°œìë¥¼ ê¿ˆê¾¸ëŠ” ì´ˆë¡±ì´ ì…ë‹ˆë‹¤. ì•ˆë…•í•˜ì„¸ìš” ê°œë°œìë¥¼ ê¿ˆê¾¸ëŠ” ì´ˆë¡±ì´ ì…ë‹ˆë‹¤. ì•ˆë…•í•˜ì„¸ìš” ê°œë°œìë¥¼ ê¿ˆê¾¸ëŠ” ì´ˆë¡±ì´ ì…ë‹ˆë‹¤. ì•ˆë…•í•˜ì„¸ìš” ê°œë°œìë¥¼ ê¿ˆê¾¸ëŠ” ì´ˆë¡±ì´ ì…ë‹ˆë‹¤. -->
    </div>
    </div>
    <hr>

    <div id="postingList"></div>

    <div class="mycards">
        <div id="card" class="row row-cols-1 row-cols-md-4 g-4">

        </div>
    </div>


    <!-- í¬ìŠ¤íŒ… ëª¨ë‹¬ -->
    <div id="postModal" class="post-modal">
        <div class="post-modal-content">
            <span class="close" id="closeModal">&times;</span>

            <div class="postcontainer">
                <!-- ì´ë¯¸ì§€ ì˜ì—­ -->
                <div class="leftContainer">
                    <div class="slider">

                        <div class="content-wrapper" id="PkrleTrORdA86cE30g7T">
                            <div class="content">
                                <div class="slides">
                                    <img src="../img/cat.jpg" alt="ì´ë¯¸ì§€1">
                                </div>
                                <div class="slides">
                                    <img src="../img/dog.jpg" alt="ì´ë¯¸ì§€2">
                                </div>
                                <div class="slides">
                                    <img src="../img/cat.jpg" alt="ì´ë¯¸ì§€3">
                                </div>
                            </div>
                        </div>

                        <!-- ì¢Œìš° í™”ì‚´í‘œ -->
                        <div class="arrow left" onclick="prevSlide()">&#10094;</div>
                        <div class="arrow right" onclick="nextSlide()">&#10095;</div>

                        <!-- í•˜ë‹¨ dot -->
                        <div class="dots" id="dotsContainer">
                            <span class="dot active" onclick="goToSlide(0)"></span>
                            <span class="dot" onclick="goToSlide(1)"></span>
                            <span class="dot" onclick="goToSlide(2)"></span>
                        </div>

                    </div>
                </div>

                <!-- ì½˜í…ì¸  ì˜ì—­ -->
                <div class="rightContainer">
                    <div class="profile">
                        <img src="" class="profile-img" id="posting-profile-image"/>
                        <span class="username" id="posting-name">ì›ì„¸ì˜</span>
                    </div>

                    <div class="post-text">
                        ì•ˆë…•í•˜ì„¸ìš” ğŸ˜Š<br>
                        ë‚¯ì€ ë§ì´ ê°€ë¦¬ì§€ë§Œ ì—¬ëŸ¬ë¶„ê³¼ ì¹œí•´ì§€ê³  ì‹¶ì€ ê°•ë‹¤ì—°ì…ë‹ˆë‹¤.
                    </div>

                    <ul id="commentList"></ul>

                    <!-- <div class="comments">
                        <div class="comment">ğŸ’ ì•ˆë…•í•˜ì„¸ìš”!</div>
                        <div class="comment">ê·€ì—¬ìš´ ê°•ì•„ì§€ë„ ë³´ê³  ì‹¶ì–´ìš” ğŸ¶</div>
                    </div> -->

                    <div id="commentInputGroup">
                        <input type="text" name="" id="commentInput" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”." />
                        <button type="button" id="commentButton">
                            <img src="../images/icon_send.svg" />
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ì—…ë¡œë“œ ëª¨ë‹¬ -->
    <div id="uploadModal" class="upload-modal">
        <div class="upload-modal-content">
            <span class="close" id="closeModal">&times;</span>
            <div class="mypostingbox" id="postingbox">
                <h3 style="text-align: center;">ê²Œì‹œê¸€ ì‘ì„±í•˜ê¸°</h3>
                <hr>
                <div class="form-floating mb-3">
                    <input type="text" class="form-control" id="content" placeholder="ë‚´ìš©">
                    <label for="content">ë‚´ìš©</label>
                </div>
                <div class="input-group mb-3">
                    <input type="file" class="form-control" id="imageFiles" multiple>
                </div>
                <div class="mybtn">
                    <button type="button" class="btn btn-danger" id="postingbtn">ê²Œì‹œí•˜ê¸°</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>